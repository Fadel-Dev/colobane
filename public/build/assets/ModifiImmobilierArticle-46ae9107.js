import{j as U,r as S,e as V,O as W,a as B,w as R,o as r,d as J,u as l,X as G,b as e,g as a,F as y,m as w,n as h,t as g,k as p,f as b,B as v,s as I,l as d,A as Z}from"./vue-vendor-62c7cc23.js";import{_ as P}from"./AppLayout-d45d157e.js";import{O as X}from"./inertia-vendor-f9f2960d.js";import"./vendor-52fc2db2.js";import"./ChatBot-09757cca.js";/* empty css                                                                */import"./_plugin-vue_export-helper-c27b6911.js";const H={class:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-gray-50 py-8"},Q={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8"},Y=e("div",{class:"text-center mb-8"},[e("h1",{class:"text-3xl font-bold text-gray-900 mb-2"}," Modifier votre annonce immobilière "),e("p",{class:"text-gray-600"}," Modifiez les informations de votre annonce ci-dessous ")],-1),ee={key:0,class:"mb-8"},te={class:"flex items-center justify-between"},oe={class:"flex items-center flex-1"},se={key:0,class:"bi bi-check-lg text-xl"},ie={key:1},le={key:1,class:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-6 mb-8"},ne=["onClick"],re={class:"p-6 text-center"},ae={class:"text-lg font-semibold text-gray-800 group-hover:text-principal transition-colors duration-300"},de=["onSubmit"],ce={key:0,class:"space-y-6"},ue=e("div",null,[e("h2",{class:"text-2xl font-bold text-gray-900 mb-6"}," Informations de base ")],-1),pe=e("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},[d(" Titre de l'annonce "),e("span",{class:"text-red-500"},"*")],-1),me=e("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},[d(" Prix (FCFA) "),e("span",{class:"text-red-500"},"*")],-1),ge=e("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},[d(" Description "),e("span",{class:"text-red-500"},"*")],-1),be=e("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},[d(" Région "),e("span",{class:"text-red-500"},"*")],-1),he=e("option",{value:"",disabled:"",selected:"",hidden:""},"Sélectionnez une région",-1),fe=e("option",{value:"Dakar"},"Dakar",-1),xe=e("option",{value:"Diourbel"},"Diourbel",-1),_e=e("option",{value:"Fatick"},"Fatick",-1),ve=e("option",{value:"Kaffrine"},"Kaffrine",-1),ye=e("option",{value:"Kaolack"},"Kaolack",-1),we=e("option",{value:"Kédougou"},"Kédougou",-1),ke=e("option",{value:"Kolda"},"Kolda",-1),Se=e("option",{value:"Louga"},"Louga",-1),Ve=e("option",{value:"Matam"},"Matam",-1),Ie=e("option",{value:"Saint-Louis"},"Saint-Louis",-1),Ce=e("option",{value:"Sédhiou"},"Sédhiou",-1),je=e("option",{value:"Tambacounda"},"Tambacounda",-1),Ee=e("option",{value:"Thiès"},"Thiès",-1),Ae=e("option",{value:"Ziguinchor"},"Ziguinchor",-1),De=[he,fe,xe,_e,ve,ye,we,ke,Se,Ve,Ie,Ce,je,Ee,Ae],Le=e("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},[d(" Catégorie "),e("span",{class:"text-red-500"},"*")],-1),Oe=e("option",{value:"",disabled:"",selected:"",hidden:""},"Sélectionnez...",-1),ze=e("option",{value:"Vente"},"Vente",-1),Te=e("option",{value:"Location"},"Location",-1),Me=[Oe,ze,Te],qe={class:"flex justify-end pt-4"},Fe=["disabled"],Ne=e("i",{class:"bi bi-arrow-right ml-2"},null,-1),$e={key:1,class:"space-y-6"},Ke=e("div",null,[e("h2",{class:"text-2xl font-bold text-gray-900 mb-6"}," Détails du bien ")],-1),Ue={key:0},We=e("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},[d(" Nombre de pièces "),e("span",{class:"text-red-500"},"*")],-1),Be={key:1},Re=e("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},[d(" Surface (m²) "),e("span",{class:"text-red-500"},"*")],-1),Je=e("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},[d(" Type d'affaire "),e("span",{class:"text-red-500"},"*")],-1),Ge=e("option",{value:"",disabled:"",selected:""},"Sélectionnez...",-1),Ze=e("option",{value:"Vente"},"Vente",-1),Pe=e("option",{value:"Location"},"Location",-1),Xe=[Ge,Ze,Pe],He={class:"flex justify-between pt-4"},Qe=e("i",{class:"bi bi-arrow-left mr-2"},null,-1),Ye=["disabled"],et=e("i",{class:"bi bi-arrow-right ml-2"},null,-1),tt={key:2,class:"space-y-6"},ot=e("div",null,[e("h2",{class:"text-2xl font-bold text-gray-900 mb-6"}," Photos du bien ")],-1),st={key:0,class:"mb-6"},it=e("h3",{class:"text-lg font-semibold text-gray-700 mb-4"},"Images actuelles",-1),lt={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"},nt=["src","alt"],rt=["onClick"],at=e("i",{class:"bi bi-x-lg text-sm"},null,-1),dt=[at],ct=e("div",{class:"absolute bottom-2 left-2 bg-black/60 text-white px-2 py-1 rounded text-xs font-semibold"}," Actuelle ",-1),ut=e("label",{class:"block text-sm font-semibold text-gray-700 mb-2"}," Ajouter de nouvelles photos ",-1),pt={class:"text-xs text-gray-500 mb-4"},mt={key:0,class:"text-principal font-semibold"},gt={class:"mb-6"},bt=e("i",{class:"bi bi-cloud-upload text-5xl text-principal mb-3"},null,-1),ht=e("p",{class:"text-lg font-semibold text-gray-900 mb-1"}," Cliquez pour sélectionner des photos ",-1),ft=e("p",{class:"text-sm text-gray-600"}," ou glissez-déposez vos images ici ",-1),xt={key:0,class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"},_t=["src","alt"],vt=["onClick"],yt=e("i",{class:"bi bi-x-lg text-sm"},null,-1),wt=[yt],kt={class:"absolute bottom-2 left-2 bg-principal text-white px-2 py-1 rounded text-xs font-semibold"},St={class:"flex justify-between pt-4"},Vt=e("i",{class:"bi bi-arrow-left mr-2"},null,-1),It=["disabled"],Ct={key:0,class:"bi bi-check-lg ml-2"},jt={key:1,class:"bi bi-hourglass-split animate-spin ml-2"},Mt={__name:"ModifiImmobilierArticle",props:{maison:Object,nameSeler:Object,mailSeler:Object,phoneSeler:Object,urlActuelle:Object},setup(z){const n=z,o=U({nom:n.maison?.nom||"",description:n.maison?.description||"",prix:n.maison?.prix||"",type:n.maison?.type||"",npiece:n.maison?.npiece||"",surface:n.maison?.surface||"",region:n.maison?.region||"",categorie:n.maison?.categorie||"",affaire:n.maison?.affaire||"",images:[],image1:null,image2:null,image3:null,deletedImages:[]}),u=S([]),x=10,f=S([]),C=V(()=>{const t=[];n.maison?.image1&&n.maison.image1!==""&&!f.value.includes(n.maison.image1)&&t.push({url:n.maison.image1,id:"image1",isExisting:!0}),n.maison?.image2&&n.maison.image2!==""&&!f.value.includes(n.maison.image2)&&t.push({url:n.maison.image2,id:"image2",isExisting:!0}),n.maison?.image3&&n.maison.image3!==""&&!f.value.includes(n.maison.image3)&&t.push({url:n.maison.image3,id:"image3",isExisting:!0});let i=[];if(n.maison?.images){if(Array.isArray(n.maison.images))i=n.maison.images;else if(typeof n.maison.images=="string")try{i=JSON.parse(n.maison.images)}catch(s){console.error("Erreur parsing JSON images:",s),i=[]}}return Array.isArray(i)&&i.forEach((s,c)=>{s&&s!==""&&!t.some(_=>_.url===s)&&!f.value.includes(s)&&t.push({url:s,id:`json_${c}`,isExisting:!0})}),t}),T=t=>!t||t==="null"||t===""?"https://via.placeholder.com/800x600?text=Image+non+disponible":t.startsWith("http://")||t.startsWith("https://")?t:t.startsWith("storage/")||t.startsWith("/storage/")?t.startsWith("/")?t:"/"+t:"/storage/"+t;function M(t){const i=Array.from(t.target.files);j(i),t.target&&(t.target.value="")}function j(t){const i=x-u.value.length;t.slice(0,i).forEach(c=>{if(c.type.startsWith("image/")){const _=URL.createObjectURL(c);u.value.push({file:c,preview:_,id:Date.now()+Math.random(),isExisting:!1}),o.images.push(c)}})}function q(t){t.preventDefault(),t.stopPropagation();const i=Array.from(t.dataTransfer.files);j(i)}function E(t){t.preventDefault(),t.stopPropagation()}function F(t){u.value[t].preview&&URL.revokeObjectURL(u.value[t].preview),u.value.splice(t,1),o.images.splice(t,1)}function N(t){f.value.includes(t)||f.value.push(t);let i=t;t.includes("/storage/")?i=t.split("/storage/")[1]||t:t.startsWith("storage/")&&(i=t.replace("storage/","")),!o.deletedImages.includes(i)&&!o.deletedImages.includes(t)&&(o.deletedImages.push(i),i!==t&&o.deletedImages.push(t))}const A=V(()=>o.nom&&o.prix&&o.description&&o.type),D=V(()=>["Villa","Appartement","Immeuble","Chambre"].includes(o.type)?o.npiece&&o.affaire:o.surface&&o.affaire),m=S(1),k=3;function L(){m.value<k&&m.value++}function O(){m.value>1&&m.value--}function $(){o.images.length>0&&(o.image1=o.images[0]||null,o.image2=o.images.length>1?o.images[1]:null,o.image3=o.images.length>2?o.images[2]:null),o.put(`/immobilier/${n.maison.id}`,{preserveScroll:!0,onSuccess:()=>{X.visit("/dashboard")}})}W(()=>{u.value.forEach(t=>{t.preview&&!t.isExisting&&URL.revokeObjectURL(t.preview)})});const K=[{id:1,titre:"Villa",icon:"bi-house-door"},{id:2,titre:"Appartement",icon:"bi-building"},{id:3,titre:"Terrain",icon:"bi-map"},{id:4,titre:"Chambre",icon:"bi-door-open"},{id:5,titre:"Immeuble",icon:"bi-buildings"},{id:6,titre:"Verger",icon:"bi-tree"},{id:7,titre:"Ferme",icon:"bi-barn"}];return(t,i)=>(r(),B(P,{title:"Modifier l'annonce"},{default:R(()=>[J(l(G),{title:"Modifier l'annonce immobilière"}),e("div",H,[e("div",Q,[Y,l(o).type?(r(),a("div",ee,[e("div",te,[(r(),a(y,null,w(k,s=>e("div",{key:s,class:"flex items-center flex-1"},[e("div",oe,[e("div",{class:h(["w-10 h-10 rounded-full flex items-center justify-center font-bold transition-all",m.value>=s?"bg-principal text-white":"bg-gray-200 text-gray-500"])},[m.value>s?(r(),a("i",se)):(r(),a("span",ie,g(s),1))],2),s<k?(r(),a("div",{key:0,class:h(["flex-1 h-1 mx-2 rounded-full transition-all",m.value>s?"bg-principal":"bg-gray-200"])},null,2)):p("",!0)])])),64))])])):p("",!0),l(o).type?p("",!0):(r(),a("div",le,[(r(),a(y,null,w(K,s=>e("div",{key:s.id,onClick:c=>l(o).type=s.titre,class:h(["relative bg-white rounded-2xl shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition-all duration-300 cursor-pointer group",l(o).type===s.titre?"ring-4 ring-principal ring-opacity-60":""])},[e("div",re,[e("i",{class:h(`bi ${s.icon} text-5xl text-principal mb-4 group-hover:scale-110 transition-transform duration-300`)},null,2),e("h3",ae,g(s.titre),1)])],10,ne)),64))])),l(o).type?(r(),a("form",{key:2,onSubmit:Z($,["prevent"]),class:"bg-white p-8 rounded-2xl shadow-xl"},[m.value===1?(r(),a("div",ce,[ue,e("div",null,[pe,b(e("input",{class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-principal focus:border-transparent transition-all",id:"nom",name:"nom",type:"text",placeholder:"Ex: Belle villa avec piscine","onUpdate:modelValue":i[0]||(i[0]=s=>l(o).nom=s),required:""},null,512),[[v,l(o).nom]])]),e("div",null,[me,b(e("input",{class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-principal focus:border-transparent transition-all",id:"prix",type:"text",placeholder:"Ex: 50000000",name:"prix","onUpdate:modelValue":i[1]||(i[1]=s=>l(o).prix=s),required:""},null,512),[[v,l(o).prix]])]),e("div",null,[ge,b(e("textarea",{class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-principal focus:border-transparent transition-all",id:"description",rows:"5",name:"description","onUpdate:modelValue":i[2]||(i[2]=s=>l(o).description=s),placeholder:"Décrivez votre bien en détail...",required:""},null,512),[[v,l(o).description]])]),e("div",null,[be,b(e("select",{class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-principal focus:border-transparent transition-all bg-white","onUpdate:modelValue":i[3]||(i[3]=s=>l(o).region=s),required:""},De,512),[[I,l(o).region]])]),e("div",null,[Le,b(e("select",{class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-principal focus:border-transparent transition-all bg-white","onUpdate:modelValue":i[4]||(i[4]=s=>l(o).categorie=s),required:""},Me,512),[[I,l(o).categorie]])]),e("div",qe,[e("button",{type:"button",onClick:L,disabled:!l(A),class:h(["px-6 py-3 rounded-xl font-semibold transition-all",l(A)?"bg-principal text-white hover:bg-principal-dark shadow-lg hover:shadow-xl":"bg-gray-300 text-gray-500 cursor-not-allowed"])},[d(" Suivant "),Ne],10,Fe)])])):p("",!0),m.value===2?(r(),a("div",$e,[Ke,["Villa","Appartement","Immeuble","Chambre"].includes(l(o).type)?(r(),a("div",Ue,[We,b(e("input",{class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-principal focus:border-transparent transition-all",id:"npiece",name:"npiece",type:"text",placeholder:"Ex: 4","onUpdate:modelValue":i[5]||(i[5]=s=>l(o).npiece=s),required:""},null,512),[[v,l(o).npiece]])])):(r(),a("div",Be,[Re,b(e("input",{class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-principal focus:border-transparent transition-all",id:"surface",name:"surface",type:"text",placeholder:"Ex: 500","onUpdate:modelValue":i[6]||(i[6]=s=>l(o).surface=s),required:""},null,512),[[v,l(o).surface]])])),e("div",null,[Je,b(e("select",{class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-principal focus:border-transparent transition-all bg-white",id:"affaire",name:"affaire","onUpdate:modelValue":i[7]||(i[7]=s=>l(o).affaire=s),required:""},Xe,512),[[I,l(o).affaire]])]),e("div",He,[e("button",{type:"button",onClick:O,class:"px-6 py-3 bg-gray-200 text-gray-700 rounded-xl font-semibold hover:bg-gray-300 transition-all"},[Qe,d(" Précédent ")]),e("button",{type:"button",onClick:L,disabled:!l(D),class:h(["px-6 py-3 rounded-xl font-semibold transition-all",l(D)?"bg-principal text-white hover:bg-principal-dark shadow-lg hover:shadow-xl":"bg-gray-300 text-gray-500 cursor-not-allowed"])},[d(" Suivant "),et],10,Ye)])])):p("",!0),m.value===3?(r(),a("div",tt,[ot,l(C).length>0?(r(),a("div",st,[it,e("div",lt,[(r(!0),a(y,null,w(l(C),(s,c)=>(r(),a("div",{key:s.id,class:"relative group aspect-square rounded-xl overflow-hidden shadow-md border border-gray-200"},[e("img",{src:T(s.url),alt:`Image ${c+1}`,class:"w-full h-full object-cover"},null,8,nt),e("button",{type:"button",onClick:_=>N(s.url),class:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1.5 hover:bg-red-600 transition-colors opacity-0 group-hover:opacity-100 z-10","aria-label":"Supprimer l'image"},dt,8,rt),ct]))),128))])])):p("",!0),e("div",null,[ut,e("p",pt,[d(" Sélectionnez plusieurs photos à la fois (maximum "+g(x)+" photos) "),u.value.length>0?(r(),a("span",mt," - "+g(u.value.length)+"/"+g(x)+" sélectionnées ",1)):p("",!0)]),e("div",gt,[u.value.length<x?(r(),a("label",{key:0,onDrop:q,onDragover:E,onDragenter:E,class:"block w-full border-2 border-dashed border-principal rounded-xl cursor-pointer hover:bg-principal/5 transition-colors p-8 text-center"},[e("div",null,[bt,ht,ft,e("p",{class:"text-xs text-gray-500 mt-2"}," Formats acceptés: JPG, PNG, WEBP (max "+g(x)+" photos) ")]),e("input",{type:"file",onChange:M,class:"hidden",accept:"image/*",multiple:""},null,32)],32)):p("",!0)]),u.value.length>0?(r(),a("div",xt,[(r(!0),a(y,null,w(u.value,(s,c)=>(r(),a("div",{key:s.id,class:"relative group aspect-square rounded-xl overflow-hidden shadow-md border border-gray-200"},[e("img",{src:s.preview,alt:`Preview ${c+1}`,class:"w-full h-full object-cover"},null,8,_t),e("button",{type:"button",onClick:_=>F(c),class:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1.5 hover:bg-red-600 transition-colors opacity-0 group-hover:opacity-100 z-10","aria-label":"Supprimer l'image"},wt,8,vt),e("div",kt," Nouvelle Photo "+g(c+1),1)]))),128))])):p("",!0)]),e("div",St,[e("button",{type:"button",onClick:O,class:"px-6 py-3 bg-gray-200 text-gray-700 rounded-xl font-semibold hover:bg-gray-300 transition-all"},[Vt,d(" Précédent ")]),e("button",{type:"submit",disabled:l(o).processing,class:h(["px-6 py-3 rounded-xl font-semibold transition-all",l(o).processing?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-principal text-white hover:bg-principal-dark shadow-lg hover:shadow-xl"])},[d(g(l(o).processing?"Enregistrement...":"Enregistrer les modifications")+" ",1),l(o).processing?(r(),a("i",jt)):(r(),a("i",Ct))],10,It)])])):p("",!0)],40,de)):p("",!0)])])]),_:1}))}};export{Mt as default};
